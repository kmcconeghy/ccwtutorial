[
  {
    "objectID": "NEWS.html",
    "href": "NEWS.html",
    "title": "Version 0.0.1 02-19-2025",
    "section": "",
    "text": "Version 0.0.1 02-19-2025\nProject set-up"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "About this site"
  },
  {
    "objectID": "about.html#versions",
    "href": "about.html#versions",
    "title": "About",
    "section": "Versions",
    "text": "Versions\n\nVersion 1.0, established 04.24.2024"
  },
  {
    "objectID": "01_syndata.v2.html",
    "href": "01_syndata.v2.html",
    "title": "Simulate data for CCW project",
    "section": "",
    "text": "Simulation Parameters\n\n1    n = 10000\n2    age = round(rnorm(n, mean = 75, sd = 10), 1)\n3    female = sample(c(1, 0), size = n, replace = TRUE, prob = c(0.66, 0.34))\n4    treat &lt;- sample(c(1, 0), size = n, replace = TRUE, prob = c(0.2, 0.8))\n5    dx_1 &lt;- sample(c(1, 0), size = n, replace = TRUE, prob = c(0.05, 0.95))\n6    dx_2 &lt;- sample(c(1, 0), size = n, replace = TRUE, prob = c(0.4, 0.6))\n7    ef_treat = 0.8\n    ef_gender = 0.9\n    ef_age = 0.98\n    ef_dx_1 = 1.2\n    ef_dx_2 = 0.8\n\n\n1\n\nUse a starting sample size of a 1000 (i.e. persons) Generate covariates:\n\n2\n\nGenerate age (normal distribution with mean=75, std=10)\n\n3\n\nFemale, 66%/34%\n\n4\n\nTreatment, 20%/80%\n\n5\n\nA rare chronic condition dx_1 5%/95%\n\n6\n\nA prevalent chronic condition dx_2 40%/60%\n\n7\n\nAssign relative effect sizes for each\n\n\n\n\n\nef_treat = 0.8\nef_gender = 0.9\nef_age = 0.98 (per unit of age)\nef_dx_1 = 1.2\nef_dx_2 = 0.8\n\n\n\n\n\n\n\nNote\n\n\n\nThese variables are generated independently, but in real-life would be correlated…\n\n\n\n\nLinear Predictor\n\n# log-hazard\n    lp_outc &lt;- log(ef_treat) * treat +\n      log(ef_gender) * female +\n1      log(ef_age) * age + log(ef_dx_1)*dx_1 + log(ef_dx_2)*dx_2\n  \n  # Simulate baseline survival times (exponential distribution)\n2    baseline_hazard &lt;- 0.05\n\n\n1\n\nCompute the linear predictor,\n\n2\n\nSimulation will use a random exponential distribution with rate of 0.05 (baseline hazard). This was selected based on trial and error.\n\n\n\n\n\n\nSimulate Event Time\n\n1    baseline_survival &lt;- rexp(n, rate = baseline_hazard)\n    \n  # Adjust survival times based on linear predictor\n2    t_outc &lt;- round(baseline_survival * exp(-lp_outc))\n\n\n1\n\nSimulate survival times using exponential distribution\n\n2\n\nAdjust the times with linear predictor and round to nearest whole number.\n\n\n\n\n\n\nSimulate Treatment Start\n\n1    lp_treat = log(0.7) * female + log(1.02) * age\n2    baseline_hazard = 0.1\n3    t_treat = if_else(treat==1, round(rexp(n, rate = baseline_hazard)* exp(-lp_treat)), Inf)\n\n\n1\n\nSimulate treatment start times based on female and age. (for weighting model); assumed dx_1 and dx_2 unrelated to treatment.\n\n2\n\nUsed a different rate, so treatment happens early relative to outcome.\n\n3\n\nGenerate treatment times and adjust for linear predictor.\n\n\n\n\n\n\nFinalize dataset\n\n  # Create dataset\n    data &lt;- data.frame(\n      age = age,\n      female = female,\n      dx_1 = dx_1,\n      dx_2 = dx_2,\n      treat = treat, \n      t_treat = t_treat, \n      t_outc = t_outc \n    ) %&gt;%\n      mutate(id = row_number(),\n1             time = pmin(60, t_outc),\n             event_outc = if_else(time==t_outc, 1L, 0L))\n\n\n1\n\nSet administrative end of follow-up at 60. No other censoring mechanism, e.g. lost to follow-up.\n\n\n\n\n\n\nSummary of survival dataset\n\nglimpse(data)\n\nRows: 10,000\nColumns: 10\n$ age        &lt;dbl&gt; 88.7, 69.4, 78.6, 81.3, 79.0, 73.9, 90.1, 74.1, 95.2, 74.4,…\n$ female     &lt;dbl&gt; 0, 1, 1, 0, 1, 1, 1, 1, 0, 1, 1, 0, 0, 0, 1, 0, 0, 0, 1, 1,…\n$ dx_1       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0,…\n$ dx_2       &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 1, 1, 0, 0, 0,…\n$ treat      &lt;dbl&gt; 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1,…\n$ t_treat    &lt;dbl&gt; Inf, Inf, Inf, Inf, Inf, Inf, Inf, Inf, 4, Inf, 2, Inf, 0, …\n$ t_outc     &lt;dbl&gt; 61, 85, 75, 28, 47, 49, 301, 57, 111, 75, 111, 206, 72, 30,…\n$ id         &lt;int&gt; 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, …\n$ time       &lt;dbl&gt; 60, 60, 60, 28, 47, 49, 60, 57, 60, 60, 60, 60, 60, 30, 60,…\n$ event_outc &lt;int&gt; 0, 0, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 1, 0, 1, 0, 0, 0, 1,…\n\n\n\nsummary(survfit(Surv(time, event_outc) ~ treat, data = data), times = c(0, 12, 30, 60))\n\nCall: survfit(formula = Surv(time, event_outc) ~ treat, data = data)\n\n                treat=0 \n time n.risk n.event survival  std.err lower 95% CI upper 95% CI\n    0   7924      33    0.996 0.000723        0.994        0.997\n   12   7125     844    0.889 0.003524        0.882        0.896\n   30   5956    1145    0.745 0.004897        0.735        0.754\n   60   4465    1475    0.559 0.005578        0.548        0.570\n\n                treat=1 \n time n.risk n.event survival std.err lower 95% CI upper 95% CI\n    0   2076       6    0.997 0.00118        0.995        0.999\n   12   1882     200    0.901 0.00656        0.888        0.914\n   30   1635     244    0.783 0.00904        0.766        0.801\n   60   1286     347    0.616 0.01067        0.596        0.637\n\n\n\n\n\n\n\n\nNote\n\n\n\nTreat=1 means they EVER received treatment, so additional work needed to describe a treatment window etc.\n\n\n\n\nCloning procedure\nThe cloning procedure is very project specific, tied to how the treatment strategy is defined so it is hard to give general recommendations here. For this tutorial, we describe an arbitrary window in which treatment is expected to initiate and outline strategies around this:\nTreatment Strategies:  1) Do not ever receive treatment 2) Initiate treatment within 12 time periods (days, weeks etc.) and if not then treatment will initiate on week 12.\n\n\n\n\n\n\nNote\n\n\n\nThe grace window is a funny concept when you first consider it. This does not reflect any trial I have ever heard of actually being done but may identify an interesting or important effect. It is essentially outlying a treatment “protocol” and saying what if everyone adhered to this protocol counterfactual to what was observed.\n\n\nTo clone, you make two copies of the data, and make a new artifical censoring variable, which is a censoring time for the period when clones observed data are no longer consistent with their assigned strategy.\n\n1data_cloned = bind_rows(\n                     data %&gt;%\n                       mutate(assign = 0,\n                              t_artcens = if_else(t_treat &lt; time, t_treat, Inf)\n                       ),\n2                     data %&gt;%\n                       mutate(assign = 1,\n                              t_artcens = if_else(t_treat &gt; 12, 12, Inf)\n                              )\n                       ) %&gt;%\n3  mutate(t_clone = pmin(time, t_artcens),\n         event_outc = if_else(t_clone&lt;time, 0, event_outc))\n\n\n1\n\nClones assigned to strategy 1 (No treatment)\n\n2\n\nClones assigned to strategy 2 (grace window for treatment)\n\n3\n\nUpdate failure times and events counting artificial censoring\n\n\n\n\n\n\n\n\n\n\nNote\n\n\n\nI set failure times to Infinite when the event is unobserved, e.g. if no treatment, time to treatment is INF"
  },
  {
    "objectID": "02_est.html",
    "href": "02_est.html",
    "title": "Estimation",
    "section": "",
    "text": "Simulation Parameters\n\n\n\n\n\n\nNote\n\n\n\nThese variables are generated independently, but in real-life would be correlated…"
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Tutorial for Clone-Censor-Weighting Analyses",
    "section": "",
    "text": "Data; Demonstrates how to simulate a dataset for use in CCW along with the cloning process. A key process is how to generate a “cloned” dataset, refer here\nEstimation; Main section which walks through each estimation step.\n\nFor production notes and future efforts see: About."
  },
  {
    "objectID": "index.html#acknowledgements",
    "href": "index.html#acknowledgements",
    "title": "Tutorial for Clone-Censor-Weighting Analyses",
    "section": "Acknowledgements",
    "text": "Acknowledgements\nThe tutorial represents my gathered and organized notes from research projects and didactic training. Collaborators and mentors include: Issa Dahabreh, Kaley Hayes, Daniel Harris, Donald Miller and Andrew Zullo."
  }
]